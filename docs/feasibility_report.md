# 可行性报告

[TOC]

## 项目名称

<big>**Implementing an OS on a Raspberry Pi 3 with Rust**</big>

## 项目简介

（based on Research.md)

## 理论依据 (YL)

### Why Rust is safe?

(Rust 语言特性 ownership、option<>、)

###



## 技术依据 (LWS WRC)

### How Rust make OS safe? 

(OS里面如何用rust内禀的一些特性)

#### Samples

##### Postive

###### Redox

###### bkernel

##### Negative

###### Linux

###### Windows



### Rust is feasible (Samples) 

##### Redox

##### bkernel

##### CS140e



## 3 设计方案 (LYF)

本项目的目的是针对树莓派3B+嵌入式设备，采用Rust语言(结合一定量的ARM汇编语言)开发一个可运行的，基本功能齐全的定制OS。

我们在实现过程中会参考Stanford CS140e课程及其他操作系统开发资料，并在其上做出一定程度的调整和优化工作。

以下给出初步的设计方案，最终的实现方案可能会在开发过程中略有改变，将在以后的报告中进行说明。

### 3.0 总体架构

![1554296083334](feasibility_report.assets/architecture_v2.0.png)

#### 3.1 从硬件到软件

树莓派上电以后会经历数阶段的boot过程

#### 3.2 基本数据结构

虽然Rust中定义了不少实用的数据类型，如```Vector```、```String```等结构，但是许多这样的结构都需要依赖操作系统提供的```malloc()```系统调用实现。考虑到现在的程序需要直接在 Raspberry Pi 裸机上运行，无法使用这些结构，我们必须直接基于硬件的空间来实现一些基本的数据结构以便在更高层次上实现内核所需的数据结构。

#### 3.3 内核数据结构



#### 3.4 文件系统

##### 类型选择

从OSH课程的第一次实验中，我们知道

#### 3.5 内存管理

我们的项目将运行在树莓派裸金属上，暂不考虑内存虚拟化的设计。为此我们将考虑如下方面的问题。

在 ARM CPU 中，有部分内存地址区域中，保存有关于该 CPU 的一些信息，例如内存大小等。这些信息以类似 [TLV](https://en.wikipedia.org/wiki/Type-length-value) 的形式进行保存，可通过程序进行遍历，获取必要的信息。

而为了让我们的OS可以合理地管理内存，就需要实现存储控制方面的函数，比如可以通过读取 ATAGS，获取内存的大小和起始位置，并返回可用内存地址范围。

#### 3.6 进程管理

进程管理是操作系统中一个非常重要的概念。在这一部分中，我们将考虑进程的资源分配、信息维护以及调度方案。

##### 进程信息维护

##### 内核态与用户态

##### 进程调度

#### 3.7 异常与中断处理

#### 3.8 系统调用的设计
