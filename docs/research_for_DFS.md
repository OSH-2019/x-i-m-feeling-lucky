

# 一、项目背景
## 1.分布式系统的历史兴衰
## 2.大学生为什么需要一个分布式文件系统？
作为每天生活在同一片蓝天之下的学生们，我们需要的文件有大量是相似甚至是完全一样的。比如一个需要上传下达的党、团有关重要事项或重要精神的通知，再比如同一门课程的同学，甚至是不同年级的，会都需要课程相关的习题集、课本、答案乃至期末考试真题等。

以前，这些文件靠纸张来传递、传承。现在，这些文件多通过社交软件群组来传播。或者 ftp 服务器、科大镜像站 USTC mirror，也都有传递文件的功能。甚至最近因为太过出名而关停的 USTC-CS-Courses-Resource，乃至在匿名的群里交换小道消息与秘密文件的每一个学生，都说明了大学生文件系统有需求，有其存在的必要性与合理性。

当然，上面的例子中前两个与后两个还是有不同的。前面两者中文件发布者是中心化的，而需求的量比较大，需求者众多。而后两者，文件是自由分享下载的，在文件数据流向方面体现出去中心化的特征，有一定的活跃发布者，也存在需求比较特殊的需求者。你在上面分享的实验代码或报告，甚至是课堂笔记乃至读书随笔，都会有人拿来作为参考借鉴，实现了知识更进一步，更加自由的交流与知识传播的去中心化。

这些文件系统都有其自己的缺陷。因为其存储，管理都是中心化的，也就继承了中心化的很多不足。 USTC-CS-Courses-Resource 下线之后，所有分享的文件就再也不能访问了，文件就从文件系统里消失了，就算很多文件的备份就静静地躺在同学 PC 的硬盘里，也没法为他人所用，只能在 GitHub 上再建一个仓库，再重新征集文件。这就是中心化文件系统的一大缺陷：中心失效问题。中心服务器可能因为各种各样的原因暂时或永久失效，造成文件暂时不能访问或永远消失。中心服务器采用备份或其他手段抵御故障或攻击，但这样会增加系统的成本。中心化系统还有很多其他缺陷，比如：
  - 初始投入可能比较大，比如需要一个服务器

  - 需要有管理者的不断维护
也许因为这些原因，我们到目前还是没有自己的稳定、普及、廉价的校园文件共享平台。

而一个校园级别的分布式文件系统就比较适合作为上述平台的基石。
  - 每一个学生都是分布式文件系统的一个节点

  - 每一个节点的文件备份都可能为他人所用

  - 每一个节点的地位都是平等的

  - 文件不会轻易丢失

  - 社区性

  - 系统会逐渐成长

  - 容易避免可能的审查

  - 初始投入比较少

  - 节省维护成本

  - 适应节点频繁上下线的情况

下文会在[与校园文件分享需求的契合](#2.与校园文件分享需求的契合)中给出详细论述。

## 3.分布式存储系统为什么也需要协调？
这一点是我们项目构思设想中最有创新性的一点了。我们最初的想法，是如何在一个像 IPFS 一样的去中心化分布式系统中改进文件的传输效率与存储效率。当然，这两点相比中心化存储已经优秀了很多：
  - 单点故障

  - 单服务器传输

但还有不少问题悬而未决：
  - 分布式存储系统如何决定哪个节点什么时候存储哪一些数据？

    如 IPFS，一个文件发布之后会逐渐扩散到全球的节点上，这时哪些节点存储这个文件会是最高效率或近似最高效率的呢？如果每一个访问过这个文件的节点都保存一份这个文件，这显然是对存储资源的极大浪费；一个网页可能只后都不会再看了。当然，IPFS文件是分块的，如同比特流，那不同块该如何决定存储位置以增强传输效率呢、容错性？

  - 分布式存储系统如何决定一个文件在一个节点上停留多久？

    或者更加细节的问题：文件的需求是动态的，而不是静态的。文件的存储节点应该如何调整？

  - 文件会消失吗？

    IPFS 宣称上传的文件不会消失。但文件发布过去越久，一般需求量就越小。如果分布式存储系统遇到了存储空间不足的情况，该转移/丢弃什么文件呢？

  - 节点是不同的，总有一些节点更加平等，或者说节点之间的差异和多样性。在一个混杂的分布式系统里，每一个节点的存储空间、网速都不一样。

  - 存储与网络性价比--权衡存储与网络开销

# 二、立项依据
## 1. 我们的项目介绍 --- 协调增强的分布式存储系统
我们将以校园内的文件分享需求为基础，搭建一个协调增强的分布式存储系统。蓝图是现有的 IPFS 系统，继承 IPFS 系统的许多特性，并且会对上面提到的问题加以重大改进。比如：
  - 这个分布式文件系统将会实现对文件存储的优化，以提升访问效率。很多文件不需要每个人/节点都存储，只需要在网络里的关键节点分块存储，而这些关键节点显然也是依照节点之间的网速等因素来最优选取的。
    那些离这个文件的需求者群体总体上网速更快的节点、存储空间更大的节点更有可能存储这个文件的一块。

  - 这个系统将会实现对文件存储的动态优化，如果一个文件的热度降低，那存储它的节点也会从网络速度优先的节点转为存储更稳定，便宜，时间更长的节点。如果这个文件的热点群体变了，那么存储它的节点群也会改变。

  - 这个系统将会实现对文件的过期处理。长期不用的文件将会被压缩存入存储空间的死角，即可能是网速最慢、链接最少、存储便宜的节点。如果这个系统存储空间不足，这些文件将会被移除系统/抛弃。

  - 这个系统将会权衡存储与网络的性价比。当网速下降，网络连接减少时，将会增加备份数量。这样可以实现综合效益的最大化。

同时，IPFS上的一些优秀特性也会保留。
  -  git
  -  bitTorrent
  -  DHT
  -  纠删码

## 2.与校园文件分享需求的契合
  - Git 提供的强大的版本控制功能与校园文件系统的显示需求不谋而合。一个文件的多个版本不会混淆，远景来看，更为基于我们的分布式文件系统上搭建的协作开发打下了基础，也能实现类似 GitHub 的功能。

  与分布式有关的优点：

  - 每一个节点的文件备份都可能为他人所用，相当于利用零碎的分散的存储空间，省去了大量集中的存储空间

  - 每一个节点的地位都是平等的，每一个学生都是文件的分享者和接收者

  - 系统容错性强，文件不会轻易消失

   USTC-CS-Courses-Resource 的下线影响了我们的学习资料获取，让我们不得不再次通过QQ分享文件。这个分布式存储系统里一个文件只要还有一个节点有备份，在线就可以访问。

  - 分布式系统节点之间有比较强的数据互动，与学生之间的频繁交流类似，体现出社区的属性，容易在此之上搭建一个活跃的文件共享社区

  - 随着节点的增加，能分享的文件也会增多，吸引更多的学生/节点加入---这个系统会逐渐成长

  - 容易避免可能的审查

  - 少投入，建设服务器的初期投入可以免去。

  - 节省维护成本，一个健壮的分布式文件系统与文件分享平台不需要人来管理，而类似的服务器或 USTC-CS-Courses-Resource 项目就需要仓库所有者的维护。

  - 上传下载更加方便

  这个是我们希望能实现的目标，使上传下载比其他相似功能的文件分享系统更加方便。

## 3.传统方案的不足之处
### 学校官方搭建资源网站
  可以搭建一个校园官方的资源站，同学们都访问该网站来下载自己所需要的资源。这种解决方案的优点是架构简单，方便搭建；但存在着以下缺点：

  - 开销大

    这种方案需要一个中心化的服务器来存储的数据，而海量的数据需要大量的存储服务器来存储数据。这对学校而言将是一笔不小的开销。

  - 扩展性差

    ![1524401730248](C:\Users\hangy\Desktop\FastDFS\1524401730248.png)

    如果当前的存储容量不够时，需要购入新的服务器来存储数据，可扩展性差

  - 隐私性差

    由于是中心化的文件系统，必然有学校官方的机构来对该系统进行管理和维护，这就意味着该文件系统中的资源完全由学校官方进行监控，隐私性差。

  - 对网络带宽要求高

    ![1523799046360](C:\Users\hangy\Desktop\FastDFS\IPFS调研\picture\1523799046360.png)

    由于是中心化的文件系统，当大量用户同时从这个文件系统下载资源时，网络带宽的压力很大，从而导致下载速度很慢

  - 存在单点故障问题

- 网盘

  - 私密性差

    由于存储在网盘上的资源都被网盘服务提供商所控制，服务商可能查看并监管资源，私密性较差。

  - 传输速度慢

    用户上传下载数据时严重依赖当时带宽以及运营商所开放的带宽，速度波动较大。当运营商限速时，哪怕用户的网络再流畅，用户的使用体验也极差。

# 三、前瞻与重要性
## 1. 前瞻
传播
  - 搭建社区
  - 吸引开发者

  - 分布式网盘

## 2. 重要
  - 极大地方便
  - 集体感
## 3. 不足
我们认为这套系统有很大的潜力作为一套局域的，带有特定群体性的文件分享协作系统的基础。
## 四、相关工作
### USTC-CS-Courses-Resource
### optional：其他大学或企业相关案例
### IPFS
####
####
####
####

## 五、参考文献
